2006-01-21  Michael Olson  <mwolson@gnu.org>

	* Makefile (erc-auto.el): Call erc-generate-autoloads rather than
	generate-autoloads.

	* NEWS: Add items from 2005-01-01 to 2005-08-13.

	* debian/copyright (Copyright): Update.

	* erc-auto.in (erc-generate-autoloads): Rename from
	generate-autoloads.

	* erc.el, erc-backend.el, erc-match.el, erc-netsplit.el,
	erc-nicklist.el, erc-nickserv.el, erc-notify.el, erc-pcomplete.el:
	Use (eval-when-compile 'cl), so that compilation doesn't fail.

	* erc.el: Update copyright notice.
	(erc-with-buffer): Docfix.
	(erc-once-with-server-event, erc-once-with-server-event-global)
	(erc-with-buffer, erc-with-all-buffers-of-server): Use erc-gensym
	instead of gensym.
	(erc-banlist-update): Use erc-delete-if instead of delete-if.

	* erc-backend.el (erc-decode-parsed-server-response): Docfix.

	* erc-bbdb.el: Update copyright years.
	(erc-bbdb-whois): Remove overexuberant comment.

	* erc-compat.el (erc-const-expr-p, erc-list*, erc-assert): New
	functions, the latter of which provides an `assert' equivalent.
	(erc-remove-if-not): New function that provides a simple
	implementation of `remove-if-not'.
	(erc-gensym): New function that provides a simple implementation
	of `gensym'.
	(erc-delete-if): New function that provides a simple
	implementation of `delete-if'.

	* erc-dcc.el (erc-unpack-int, erc-dcc-send-filter)
	(erc-dcc-get-filter): Use erc-assert instead of assert.
	(pcomplete/erc-mode/DCC): Use erc-remove-if-not instead of
	remove-if-not.

	* erc-nicklist.el: Update copyright notice.
	(erc-nicklist-menu): Change use of caadr to (car (cadr ...)).
	(erc-nicklist-bitlbee-connected-p): Remove.
	(erc-nicklist-insert-medium-name-or-icon): Accept channel
	argument.  Use it to determine whether we are on bitlbee.  Now
	that bitlbee names its channel "&bitlbee", this is trivial.
	(erc-nicklist-insert-contents): Pass channel as specified above.
	Don't try to determine whether we are on bitlbee here.
	(erc-nicklist-channel-users-info): Use erc-remove-if-not instead
	of remove-if-not.

	* erc-track.el: Use erc-assert.

2006-01-19  Michael Olson  <mwolson@gnu.org>

	* erc-backend.el (erc-process-sentinel-1): Remove attempt to
	detect SIGPIPE, since it doesn't work.

2006-01-10  Diane Murray  <disumu@x3y2z1.net>

	* erc-spelling.el: Updated copyright years.
	(define-erc-module): Enable/disable `flyspell-mode' for all open
	ERC buffers as well.
	(erc-spelling-dictionaries): Reworded customize description.

	* erc.el (erc-command-symbol): New function.
	(erc-extract-command-from-line): Use `erc-command-symbol'.  This
	fixes a bug where "Symbol's function definition is void:
	erc-cmd-LIST" would be shown after typing /list at the prompt (the
	command was interned because erc-menu.el uses it and is enabled by
	default whereas erc-list.el is not).

	* NEWS: Started a list of renamed variables.

	* erc.el: Reworded the message sent when defining variable
	aliases.
	(erc-command-indicator-face): Doc fix.
	(erc-modules): Enable the match module by default which makes
	current nickname highlighting on as the default.

	* erc-button.el: Updated copyright years.
	(erc-button): New face.
	(erc-button-face): Use `erc-button'.
	(erc-button-nickname-face): New customizable variable.
	(erc-button-add-nickname-buttons, erc-button-add-buttons-1): Send
	new argument to `erc-button-add-button'.
	(erc-button-add-button): Doc fix.  Added new argument to function
	definition, NICK-P.  If it's a nickname, use
	`erc-button-nickname-face', otherwise use `erc-button-face'.  This
	makes channel tracking and buttons work better together when
	`erc-button-buttonize-nicks' is enabled, since there is a nickname
	on just about every line.

	* erc-track.el (erc-track-use-faces): Doc fix.
	(erc-track-faces-priority-list): Added `erc-button' to list.
	(erc-track-priority-faces-only): Doc fix.

2006-01-09  Diane Murray  <disumu@x3y2z1.net>

	* erc-button.el (erc-button-url-regexp): Use `concat' so the
	regexp is not one long line.
	(erc-button-alist): Fixed so that customizing works correctly.
	Reorganized.  Removed lambda functions with more than two lines.
	Doc fix.
	(erc-button-describe-symbol, erc-button-beats-to-time): New
	functions.  Moved from `erc-button-alist'.

2006-01-07  Michael Olson  <mwolson@gnu.org>

	* erc-backend.el (erc-process-sentinel-1): Don't try to re-open a
	process if a SIGPIPE occurs.  This happens when a new message
	comes in at the same time a /quit is requested.
	(erc-process-sentinel): Use string-match rather than string= to do
	these comparisons.  Matching literal newlines makes me nervous.

	* erc-track.el (erc-track-remove-from-mode-line): Handle case
	where global-mode-string is not a list.  Emacs22 permits this.
