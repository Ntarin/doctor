2007-03-02  Michael Olson  <mwolson@gnu.org>

	* FOR-RELEASE: Make section for 5.3 release and move erc-backend
	cleanup there.  Awaiting discussion before doing other things.
	Add tasks for merging filename changes from the 5.2 release
	branch, and for making a tarball of modules not in Emacs 22.  Add
	item to remind me to update NEWS.  Mark backtab entry as done.

	* erc-button.el (button): Add call to `erc-button-add-keys'.
	(erc-button-keys-added): New variable tracking whether we've added
	the keys yet.
	(erc-button-add-keys): New function that adds the <backtab> key to
	erc-mode-map.

	* erc.texi: Change version to 5.2 (pre-release).

2007-02-15  Michael Olson  <mwolson@gnu.org>

	* CREDITS: Update.

	* erc-backend.el (erc-server-send-ping-interval): Change to use a
	default of 30 seconds.  Improve customize interface.
	(erc-server-send-ping-timeout): New option that determines when to
	consider a connection stalled and restart it.  The default is
	after 120 seconds.
	(erc-server-send-ping): Use erc-server-send-ping-timeout instead
	of erc-server-send-ping-interval.  If
	erc-server-send-ping-timeout is nil, do not ever kill and restart
	a hung IRC process.

	* erc.el (erc-modules): Include the name of the module in its
	description.  This should make it easier for people to find and
	enable a particular module.

2007-02-15  Vivek Dasmohapatra  <vivek@etla.org>

	* erc.el (erc-cmd-RECONNECT): Kill old process if it is still
	alive.
	(erc-message-english-PART): Properly escape "%" characters in
	reason.

	* erc-backend.el (erc-server-reconnecting): New variable that is
	set when the user requests a reconnect, but the old process is
	still alive.  This forces the reconnect to work even though the
	process is killed manually during reconnect.
	(erc-server-connect): Initialize it.
	(erc-server-reconnect-p): Use it.
	(erc-process-sentinel-1): Set it to nil after the first reconnect
	attempt.

2007-02-07  Diane Murray  <disumu@x3y2z1.net>

	* erc-menu.el (erc-menu-definition): Fixed so that the separator
	is between "Current channel" and "Pals, fools and other keywords",
	not at the bottom of the "Current channel" submenu.

2007-01-25  Diane Murray  <disumu@x3y2z1.net>

	* erc-networks.el (erc-server-alist): Removed SSL server for now
	since `erc-server-select' doesn't know to use `erc-ssl'.

	* erc-networks.el (erc-server-alist, erc-networks-alist): Added
	definitions for oftc.net.

	* erc-services.el (erc-nickserv-alist): Fixed OFTC message regexp.

2007-01-22  Michael Olson  <mwolson@gnu.org>

	* erc-backend.el (erc-server-error-occurred): New variable that
	indicates when an error has been signaled by the server.  This
	should fix an infinite reconnect bug when giving some servers a
	bogus :full-name.  Thanks to Angelina Carlton for the report.
	(erc-server-connect): Initialize erc-server-error-occurred.
	(erc-server-reconnect-p): Use it.
	(ERROR): Set it.

	* erc-services.el (erc-nickserv-alist): Alphabetize and add Ars
	and QuakeNet.  Standardize look of entries.  Fix type mismatch
	error in customize interface.
	(erc-nickserv-passwords): Alphabetize and add missing entries from
	erc-nickserv-alist.

2007-01-21  Michael Olson  <mwolson@gnu.org>

	* erc.el (erc-header-line-format): Document how to disable the
	header line, and add a customization type for it.  Also, make the
	changes take effect immediately.

2007-01-19  Michael Olson  <mwolson@gnu.org>

	* erc.texi (Modules): Document new menu module.  Thanks to Leo
	for noticing.

2007-01-16  Diane Murray  <disumu@x3y2z1.net>

	* erc-stamp.el (erc-insert-timestamp-left): Fixed so that the
	whitespace string filler is hidden correctly when timestamps are
	hidden.
	(erc-toggle-timestamps): New function to use instead of
	`erc-show-timestamps' and `erc-hide-timestamps'.

	* erc.el (erc-restore-text-properties): Moved here from
	erc-fill.el since it could be useful in general.

	* erc-fill.el (erc-restore-text-properties): Removed.

2007-01-13  Michael Olson  <mwolson@gnu.org>

	* erc.el (erc-command-regexp): New variable that is used to match
	a command.
	(erc-send-input): Use it.  This fixes a bug where paths --
	"/usr/bin/foo", for example -- were being displayed as commands,
	but still sent correctly.
	(erc-extract-command-from-line): Use it.

	* erc.texi (Modules): Document erc-capab-identify.

2007-01-11  Diane Murray  <disumu@x3y2z1.net>

	* erc.el (erc-find-parsed-property): Moved here from erc-track.el
	since it can be useful in general.

	* erc-track.el (erc-find-parsed-property): Removed.

	* erc-capab.el (erc-capab-find-parsed): Removed.
	(erc-capab-identify-add-prefix): Use `erc-find-parsed-property'.

	* erc.el (erc-open): Run `erc-before-connect' hook here.  This
	makes sure the hook always gets called before a connection is
	made, as some functions, like `erc-handle-irc-url', use `erc-open'
	instead of `erc'.
	(erc): Removed `erc-before-connect' hook.

	* erc-menu.el (erc-menu-definition): Put items specific to
	channels in a "Current channel" submenu.

	* erc-backend.el (321, 323): Display channel list in server buffer
	when not using the channel list module.

	* erc.el: Updated copyright years.
	(erc-version-string): Set to 5.2 (devel).
	(erc-format-lag-time): Fixed to work when `erc-server-lag' is nil.
	(erc-update-mode-line-buffer): Set the header face.

2007-01-11  Michael Olson  <mwolson@gnu.org>

	* erc-bbdb.el (erc-bbdb-popup-type): Fix customization type and
	documentation.

	* erc-services.el (erc-nickserv-identify-mode): Improve
	documentation for nick-change option and move higher to fix
	compiler warning.  Avoid a recursive load error.
	(erc-nickserv-alist): Add simple entry for BitlBee, to avoid
	"NickServ is AWAY: User is offline" error.  Oddly enough, bitlbee
	was smart enough to recognize that as an authentication request
	and log in regardless, which is why I didn't notice this earlier.
	(erc-nickserv-alist-sender, erc-nickserv-alist-regexp)
	(erc-nickserv-alist-nickserv, erc-nickserv-alist-ident-keyword)
	(erc-nickserv-alist-use-nick-p)
	(erc-nickserv-alist-ident-command): New accessors for
	erc-nickserv-alist.  Using nth is unwieldy.
	(erc-nickserv-identify-autodetect)
	(erc-nickserv-identify-on-connect)
	(erc-nickserv-identify-on-nick-change, erc-nickserv-identify): Use
	the new accessors.

2007-01-11  Diane Murray  <disumu@x3y2z1.net>

	* NEWS: Added note for `erc-my-nick-face'.  Fixed capab-identify
	wording.

2007-01-10  Diane Murray  <disumu@x3y2z1.net>

	* erc.el (erc-mode-line-format): Added %l to documentation.
	(erc-header-line-format): Removed "[IRC]".  Use the new %l
	replacement character.  Doc fix.
	(erc-format-channel-modes): Removed lag code.  Removed parentheses
	from mode string.
	(erc-format-lag-time): New function.
	(erc-update-mode-line-buffer): Use it.

2007-01-10  Michael Olson  <mwolson@gnu.org>

	* erc.el: Fix typo in url-irc-function instructions.

2007-01-09  Michael Olson  <mwolson@gnu.org>

	* erc.el (erc-system-name): New option that determines the system
	name to use when logging in.  The default is to figure this out by
	calling `system-name'.
	(erc-login): Use it.

2007-01-07  Michael Olson  <mwolson@gnu.org>

	* erc.el (erc-modules): Add the menu module.  This should fix a
	bug with incorrect ERC submenus being displayed.

	* erc-menu.el: Turn this into a module.
	(erc-menu-add, erc-menu-remove): New functions that add and remove
	the ERC menu.


See ChangeLog.06 for earlier changes.

    Copyright (C) 2007 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

;; Local Variables:
;; coding: utf-8
;; add-log-time-zone-rule: t
;; End:

;; arch-tag: 3369b6e5-96b1-4b32-96cd-9a905c747496
